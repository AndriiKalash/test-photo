!function(e){var t={};function n(l){if(t[l])return t[l].exports;var o=t[l]={i:l,l:!1,exports:{}};return e[l].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(l,o,function(t){return e[t]}.bind(null,o));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var l=(e,t)=>{const n=document.querySelectorAll(e);document.querySelectorAll(t);n.forEach(e=>{e.addEventListener("click",(function(){this.classList.contains("active")?(this.classList.remove("active"),this.nextElementSibling.classList.remove("block-active"),this.nextElementSibling.style.maxHeight="0px"):(n.forEach(e=>{e.classList.remove("active"),e.nextElementSibling.classList.remove("block-active"),e.nextElementSibling.style.maxHeight="0px"}),this.classList.add("active"),this.nextElementSibling.classList.add("block-active"),this.nextElementSibling.style.maxHeight=this.nextElementSibling.scrollHeight+80+"px")}))})};var o=(e,t)=>{const n=document.querySelector(e),l=document.querySelector(t);l.style.display="none",n.addEventListener("click",()=>{"none"==l.style.display&&window.screen.availWidth<993?l.style.display="block":l.style.display="none"}),window.addEventListener("resize",()=>{window.screen.availWidth>992&&(l.style.display="none")})};const s=async e=>{let t=await fetch(e);if(!t.ok)throw new Error(`Could not fetch ${e}, status ${t.status}`);return await t.json()};var a=()=>{const e=document.querySelector(".calc_form").querySelectorAll("select"),t=document.querySelector("#size"),n=document.querySelector("#material"),l=document.querySelector("#options"),o=document.querySelector(".promocode"),a=document.querySelector(".calc-price");let r,c,i;function d(){let e=r+c;r&&c?i?"IWANTPOPART "===o.value?a.textContent=e+i-(e+i)/100*30:a.textContent=e+i:"IWANTPOPART "===o.value?a.textContent=e-e/100*30:a.textContent=e:a.textContent="Для расчета нужно выбрать размер картины и материал картины"}e.forEach(e=>{e.addEventListener("change",e=>{s("assets/db.json").then(o=>{!function(e,n){if(e.target&&e.target.matches("#size"))switch(t.value){case"40x50":r=n[0]["40x50"];break;case"50x70":r=n[0]["50x70"];break;case"70x70":r=n[0]["70x70"];break;default:r=!1}}(e,o.calcForm),function(e,t){if(e.target&&e.target.matches("#material"))switch(n.value){case"Холст из волокна":c=t[1]["Холст из волокна"];break;case"Льняной холст":c=t[1]["Льняной холст"];break;case"Холст из натурального хлопка":c=t[1]["Холст из натурального хлопка"];break;default:c=!1}}(e,o.calcForm),function(e,t){if(e.target&&e.target.matches("#options"))switch(l.value){case"Покрытие арт-гелем":i=t[2]["Покрытие арт-гелем"];break;case"Экспресс-изготовление":i=t[2]["Экспресс-изготовление"];break;case"Доставка готовых работ":i=t[2]["Доставка готовых работ"];break;default:i=!1}}(e,o.calcForm),d()}).catch(e=>console.log("error")).finally(()=>{})})}),o.addEventListener("input",d)};var r=e=>{document.querySelectorAll(e).forEach(e=>{e.addEventListener("mouseover",()=>{!function(e){let t=e.querySelector("img");t.src=t.src.slice(0,-4)+"-1.png",e.querySelectorAll("p:not(.sizes-hit)").forEach(e=>{e.style.display="none"})}(e)}),e.addEventListener("mouseout",()=>{!function(e){let t=e.querySelector("img");t.src=t.src.slice(0,-6)+".png",e.querySelectorAll("p:not(.sizes-hit)").forEach(e=>{e.style.display=""})}(e)})})};var c=()=>{const e=document.querySelectorAll('[name = "upload"]');function t(e){e.preventDefault(),e.stopPropagation()}["dragenter","dragleave","dragover","drop"].forEach(n=>{e.forEach(e=>{e.addEventListener(n,t,!1)})}),["dragenter","dragover"].forEach(t=>{e.forEach(e=>{e.addEventListener(t,()=>{return(t=e).closest(".file_upload").style.border="5px solid yellow",void(t.closest(".file_upload").style.backgroundColor="rgba(0,0,0, .7)");var t},!1)})}),["dragleave","drop"].forEach(t=>{e.forEach(e=>{e.addEventListener(t,()=>{return(t=e).closest(".file_upload").style.border="",void(t.closest(".calc_form")?t.closest(".file_upload").style.backgroundColor="#fff":t.closest(".file_upload").style.backgroundColor="#ededed");var t},!1)})}),e.forEach(e=>{e.addEventListener("drop",t=>{let n;e.files=t.dataTransfer.files;const l=e.files[0].name.split(".");n=l[0].length>6?"...":".";const o=l[0].substring(0,6)+n+l[1];e.previousElementSibling.textContent=o})})};var i=()=>{const e=document.querySelector(".portfolio-menu"),t=e.querySelectorAll("li"),n=document.querySelector(".portfolio-wrapper").querySelectorAll(".all"),l=document.querySelector(".portfolio-no");e.addEventListener("click",e=>{let o=e.target;if(o&&"LI"==o.tagName){n.forEach(e=>{e.style.display="none",e.classList.remove("animated","fadeIn")}),l.style.display="none",l.classList.remove("animated","fadeIn");let e=o.classList.value;t.forEach(e=>e.classList.remove("active")),o.classList.add("active"),n.forEach(t=>{t.classList.contains(e)?(t.style.display="block",t.classList.add("animated","fadeIn")):"grandmother"!=e&&"granddad"!=e||(l.style.display="block",l.classList.add("fadeIn"))})}})};var d=()=>{const e=document.querySelectorAll("form"),t=document.querySelectorAll("input"),n=document.querySelectorAll('[name="upload"]'),l=document.querySelector(".calc-price"),o="Загрузка...",s="Спасибо! Скоро мы с вами свяжемся",a="Что-то пошло не так...",r="assets/img/spinner.gif",c="assets/img/ok.png",i="assets/img/fail.png",d="assets/server.php",u="assets/question.php";n.forEach(e=>{e.addEventListener("input",()=>{let t;console.log(e.files[0]);const n=e.files[0].name.split(".");t=n[0].length>6?"...":".";const l=n[0].substring(0,6)+t+n[1];e.previousElementSibling.textContent=l})}),e.forEach(e=>{e.addEventListener("submit",m=>{m.preventDefault();let f=document.createElement("div");f.classList.add("status"),e.parentNode.appendChild(f),e.classList.add("animated","fadeOutUp"),setTimeout(()=>{e.style.display="none"},400);let p=document.createElement("img");p.setAttribute("src",r),p.classList.add("animated","fadeInUp"),f.appendChild(p);let v=document.createElement("div");v.textContent=o,f.appendChild(v);const y=new FormData(e);let h;h=e.closest(".popup-design")||e.classList.contains("calc_form")?d:u,(async(e,t)=>{let n=await fetch(e,{method:"POST",body:t});return await n.text()})(h,y).then(e=>{console.log(e),p.setAttribute("src",c),v.textContent=s}).catch(()=>{p.setAttribute("src",i),v.textContent=a}).finally(()=>{t.forEach(e=>{e.value=""}),n.forEach(e=>{e.previousElementSibling.textContent="Файл не выбран"}),l.textContent="Для расчета нужно выбрать размер картины и материал картины",setTimeout(()=>{f.remove(),e.style.display="block",e.classList.remove("fadeOutUp"),e.classList.add("fadeInUp")},5e3)})})})};var u=e=>{function t(e){let t=0,n="+3 (___) ___ __ __".replace(/\D/g,""),l=this.value.replace(/\D/g,"");n.length>=l.length&&(l=n),this.value="+3 (___) ___ __ __".replace(/./g,(function(e){return/[_\d]/.test(e)&&t<l.length?l.charAt(t++):t>=l.length?"":e})),"blur"===e.type?2==this.value.length&&(this.value=""):((e,t)=>{if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){let n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}})(this.value.length,this)}document.querySelectorAll(e).forEach(e=>{e.addEventListener("input",t),e.addEventListener("focus",t),e.addEventListener("blur",t)})};function m(){let e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.overflowY="scroll",e.style.visibility="hidden",document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t}let f=!1;var p=function(e,t,n){let l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=document.querySelectorAll(e),s=document.querySelector(t),a=document.querySelectorAll(n),r=document.querySelectorAll("[data-modal]"),c=m(),i=document.querySelector(".fixed-gift");function d(){r.forEach(e=>{e.style.display="none",e.classList.add("animated","fadeIn")}),s.style.display="block",document.body.style.marginRight=c+"px",document.body.style.overflow="hidden",i.style.marginRight=c+"px"}function u(){r.forEach(e=>{e.style.display="none"}),s.style.display="none",document.body.style.marginRight="0px",document.body.style.overflow="",i.style.marginRight=""}function p(){!f&&window.pageYOffset+document.documentElement.clientHeight>=document.documentElement.scrollHeight-1&&(d(),window.removeEventListener("scroll",p))}o.forEach(e=>{e.addEventListener("click",t=>{t.tagName&&t.preventDefault(),l&&e.remove(),f=!0,d()})}),a.forEach(e=>{e.addEventListener("click",e=>{u()})}),s.addEventListener("click",e=>{e.target==s&&u()}),window.addEventListener("scroll",p)};var v=e=>{const t=document.querySelector(e);window.addEventListener("scroll",()=>{document.documentElement.scrollTop>1650?(t.classList.add("animated","fadeIn"),t.classList.remove("fadeOut")):(t.classList.add("fadeOut"),t.classList.remove("fadeIn"))});let n=document.querySelectorAll('[href^="#"]');n.forEach(e=>{e.addEventListener("click",(function(e){e.preventDefault();let t=document.documentElement.scrollTop,n=this.hash,l=document.querySelector(n).getBoundingClientRect().top,o=null;requestAnimationFrame((function e(s){null===o&&(o=s);let a=s-o,r=l<0?Math.max(t-a/.3,t+l):Math.min(t+a/.3,t+l);document.documentElement.scrollTo(0,r),r!=t+l?requestAnimationFrame(e):location.hash=n}))}))})};var y=(e,t)=>{document.querySelector(e).addEventListener("click",(function(){s("assets/db.json").then(e=>{e.styles.forEach(e=>{let{src:n,title:l,link:o}=e,s=document.createElement("div");s.classList.add("animated","fadeInUp","col-sm-3","col-sm-offset-0","col-xs-10","col-xs-offset-1"),s.innerHTML=`\n                <div class=styles-block>\n                    <img src=${n} alt>\n                    <h4>${l}</h4>\n                    <a href=${o}>Подробнее</a>\n                </div>\n            `,document.querySelector(t).appendChild(s)})}).catch(e=>console.log("error")).finally(()=>{this.remove()})}))};var h=(e,t,n,l)=>{const o=document.querySelectorAll(e);let s=1,a=!1;function r(){s>o.length&&(s=1),s<1&&(s=o.length),o.forEach(e=>{e.classList.add("animated"),e.style.display="none"}),o[s-1].style.display="block"}function c(e){r(s+=e)}r();try{const e=document.querySelector(n),t=document.querySelector(l);e.addEventListener("click",()=>{c(-1),o[s-1].classList.remove("slideInLeft"),o[s-1].classList.add("slideInRight")}),t.addEventListener("click",()=>{c(1),o[s-1].classList.remove("slideInRight"),o[s-1].classList.add("slideInLeft")})}catch(e){}function i(){a="vertical"===t?setInterval((function(){c(1),o[s-1].classList.add("slideInUp")}),3e3):setInterval((function(){c(1),o[s-1].classList.remove("slideInRight"),o[s-1].classList.add("slideInLeft")}),3e3)}i(),o[0].parentNode.addEventListener("mouseenter",()=>{clearInterval(a)}),o[0].parentNode.addEventListener("mouseleave",()=>{i()})};document.addEventListener("DOMContentLoaded",()=>{p(".button-design",".popup-design",".popup-close"),p(".button-consultation",".popup-consultation",".popup-close"),p(".fixed-gift",".popup-gift",".popup-close",!0),h(".main-slider-item","vertical"),h(".feedback-slider-item","",".main-prev-btn",".main-next-btn"),d(),u('[name="phone"]'),y(".button-styles","#styles .row"),a(),i(),r(".sizes-block"),l(".accordion-heading",".accordion-block"),o(".burger",".burger-menu"),v(".pageup"),c()})}]);